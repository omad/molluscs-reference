{% extends "base.html" %}


{% block headextra %}
<style>

div.dataTables_length label {
    float: left;
    text-align: left;
}

div.dataTables_length select {
    width: 75px;
}

div.dataTables_filter label {
    float: right;
}

div.dataTables_info {
    padding-top: 8px;
}

div.dataTables_paginate {
    float: right;
    margin: 0;
}

table.table {
    clear: both;
    margin-bottom: 6px !important;
}

table.table thead .sorting,
table.table thead .sorting_asc,
table.table thead .sorting_desc,
table.table thead .sorting_asc_disabled,
table.table thead .sorting_desc_disabled {
    cursor: pointer;
    *cursor: hand;
}

table.table thead .sorting { background: url('/static/datatables/images/sort_both.png') no-repeat center right; }
table.table thead .sorting_asc { background: url('/static/datatables/images/sort_asc.png') no-repeat center right; }
table.table thead .sorting_desc { background: url('/static/datatables/images/sort_desc.png') no-repeat center right; }

table.table thead .sorting_asc_disabled { background: url('/static/datatables/images/sort_asc_disabled.png') no-repeat center right; }
table.table thead .sorting_desc_disabled { background: url('/static/datatables/images/sort_desc_disabled.png') no-repeat center right; }

table.dataTable th:active {
    outline: none;
}
</style>
{% endblock %}

{% block content %}
    <h1>Mollusc Reference Collection</h1>


<table id="species_table" cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Class</th>
            <th>Family</th>
            <th>Genus</th>
            <th>Sub-genus</th>
            <th>Species</th>
        </tr>
    </thead>
    <tbody>
{% for species in species_list %}
        <tr>
            <td>{{ species.class_name }}</td>
            <td>{{ species.family }}</td>
            <td>{{ species.genus }}</td>
            <td>{{ species.subgenus }}</td>
            <td><a href="{{ species.get_absolute_url}}">{{ species.species }}</a></td>
        </tr>
{% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <th><input type="text" name="search_class" value="Search class" class="search_init" /></th>
            <th><input type="text" name="search_family" value="Search family" class="search_init" /></th>
            <th><input type="text" name="search_genus" value="Search genus" class="search_init" /></th>
            <th><input type="text" name="search_subgenus" value="Search subgenus" class="search_init" /></th>
            <th><input type="text" name="search_species" value="Search species" class="search_init" /></th>
        </tr>
    </tfoot>
</table>


{% endblock %}


{% block endjavascript %}
{{block.super}}

<script type="text/javascript" language="javascript" src="{{STATIC}}/datatables/js/jquery.dataTables.js"></script>
<script type="text/javascript" language="javascript" src="{{STATIC}}/DT_bootstrap.js"></script>
<script type="text/javascript" charset="utf-8">
    var asInitVals = new Array();

    $(document).ready(function() {
        $.extend( $.fn.dataTableExt.oStdClasses, {
            "sWrapper": "dataTables_wrapper form-inline"
        } );

        var oTable = $('#species_table').dataTable( {
            "aaSorting": [ [0,'asc'], [1,'asc'], [2,'asc'], [3,'asc'] ],
            "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
            "bLengthChange": false,
            "iDisplayLength": 20,
//            "sPaginationType": "bootstrap",
        "sScrollY": "600px",
        "bPaginate": false,
        "bScrollCollapse": true,
//            "bStateSave": true,
            "oLanguage": {
                "sSearch": "Search all columns:"
            }

        } );

        $("tfoot input").keyup( function () {
            /* Filter on the column (the index) of this element */
            oTable.fnFilter( this.value, $("tfoot input").index(this) );
        });

        /*
         * Support functions to provide a little bit of 'user friendlyness' to the textboxes in 
         * the footer
         */
        $("tfoot input").each( function (i) {
            asInitVals[i] = this.value;
        } );
         
        $("tfoot input").focus( function () {
            if ( this.className == "search_init" )
            {
                this.className = "";
                this.value = "";
            }
        } );
         
        $("tfoot input").blur( function (i) {
            if ( this.value == "" )
            {
                this.className = "search_init";
                this.value = asInitVals[$("tfoot input").index(this)];
            }
        } );
    } );
</script>
{% endblock endjavascript %}